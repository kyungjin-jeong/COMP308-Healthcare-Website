{"ast":null,"code":"var _jsxFileName = \"/Users/kyungjin/COMP308-Healthcare-Website/react-ui/src/components/nurse/DetailPatientInfo.js\";\nimport React, { useState, useEffect } from 'react';\nimport Table from 'react-bootstrap/Table';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\n\nfunction DetailPatientInfo(props) {\n  const [data, setData] = useState([]);\n  const [screen, setScreen] = useState('auth');\n  const [patientid, setId] = useState();\n  const [showLoading, setShowLoading] = useState(false);\n  const apiUrl = \"http://localhost:3000/detailPatientInfo/\" + props.match.params.id;\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const [tip, setTip] = useState([]);\n  const [message, setMessage] = useState('');\n  const apiUrlForSendingTip = \"http://localhost:3000/sendTip\";\n  const [currentUserID, setCurrentUserID] = useState('');\n  useEffect(() => {\n    readCookie();\n    setShowLoading(false);\n\n    const fetchData = async () => {\n      const result = await axios(apiUrl);\n      console.log('results from vitals' + result.data);\n\n      if (result.data == null) {\n        console.log(\"result.data is null!!\");\n      }\n\n      setId(props.match.params.id);\n      setData(result.data);\n    };\n\n    fetchData();\n  }, []); //check if the user already logged-in\n\n  const readCookie = async () => {\n    try {\n      console.log('--- in readCookie function ---'); //\n\n      const res = await axios.get('/read_cookie'); // \n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n        console.log(res.data.screen);\n        console.log(\"current user id: \", res.data.id);\n        setCurrentUserID(res.data.id);\n      }\n    } catch (e) {\n      setScreen('auth');\n      console.log(e);\n    }\n  };\n\n  const sendTip = () => {\n    const data = {\n      patientId: props.match.params.id,\n      nurseId: currentUserID,\n      tip: tip.tip\n    };\n    console.log(\"data >>>>\", data);\n    axios.post(apiUrlForSendingTip, data).then(result => {\n      console.log(\"RESULT >>>> \", result);\n\n      if (result.data.message != null) {\n        setMessage(result.data.message);\n      }\n    }).catch(error => {\n      console.log(\"ERROR!! \", error);\n    }); // Close modal\n\n    handleClose();\n    readCookie();\n  };\n\n  const onChange = e => {\n    e.persist();\n    setTip({ ...tip,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const newVital = id => {\n    console.log(\"check user id: \" + id);\n    props.history.push({\n      pathname: '/savePatientVital/' + id\n    });\n  };\n\n  const deleteVital = (id, bodytemperature, heartrate, bloodpressure, respiratoryrate, visitedDate) => {\n    console.log(\"check vital id: \" + id);\n    console.log(\"check vital bodytemperature: \" + bodytemperature);\n    console.log(\"check vital iheartrated: \" + heartrate);\n    console.log(\"check vital bloodpressure: \" + bloodpressure);\n    console.log(\"check vital respiratoryrate: \" + respiratoryrate);\n    console.log(\"check vital visitedDate: \" + visitedDate);\n    setShowLoading(true);\n    const apiUrl1 = \"http://localhost:3000/deletevital/\" + id;\n    const vital = {\n      _id: id,\n      bodytemperature: bodytemperature,\n      heartrate: heartrate,\n      bloodpressure: bloodpressure,\n      respiratoryrate: respiratoryrate,\n      visitedDate: visitedDate\n    };\n    console.log(\">>1: \" + data.visitedDate);\n    axios.delete(apiUrl1, vital).then(result => {\n      console.log(\"test\");\n      setShowLoading(false);\n      window.location.reload();\n      props.history.pushState('/detailPatientInfo/' + props.match.params.id);\n    }).catch(error => setShowLoading(false));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vitalSign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, message.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 22\n    }\n  }, message)), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, \"Vital Signs\"), data.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    responsive: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 37\n    }\n  }, \"Body Temperature\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, \"Heart Rate\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 37\n    }\n  }, \"Blood Pressure\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, \"Respiratory Rate\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 37\n    }\n  }, \"Visted Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }\n  }, data.map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 41\n    }\n  }, item.bodytemperature), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 41\n    }\n  }, item.heartrate), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 41\n    }\n  }, item.bloodpressure), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 41\n    }\n  }, item.respiratoryrate), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 41\n    }\n  }, item.visitedDate), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"ButtonSpace\",\n    onClick: () => {\n      deleteVital(item._id, item.bodytemperature, item.heartrate, item.bloodpressure, item.respiratoryrate, item.visitedDate);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, \"Delete\"))))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"ButtonSpace\",\n    onClick: () => {\n      newVital(patientid);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"New Vital\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"ButtonSpace\",\n    variant: \"success\",\n    onClick: handleShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, \"send daily motivational tips\")), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, \"Send daily motivational tips to the patient !\")), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    rows: \"5\",\n    id: \"tip\",\n    name: \"tip\",\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 29\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: sendTip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 29\n    }\n  }, \"Send\"))))));\n}\n\nexport default withRouter(DetailPatientInfo);","map":{"version":3,"sources":["/Users/kyungjin/COMP308-Healthcare-Website/react-ui/src/components/nurse/DetailPatientInfo.js"],"names":["React","useState","useEffect","Table","withRouter","axios","Button","Modal","Form","Alert","DetailPatientInfo","props","data","setData","screen","setScreen","patientid","setId","showLoading","setShowLoading","apiUrl","match","params","id","show","setShow","handleClose","handleShow","tip","setTip","message","setMessage","apiUrlForSendingTip","currentUserID","setCurrentUserID","readCookie","fetchData","result","console","log","res","get","undefined","e","sendTip","patientId","nurseId","post","then","catch","error","onChange","persist","target","name","value","newVital","history","push","pathname","deleteVital","bodytemperature","heartrate","bloodpressure","respiratoryrate","visitedDate","apiUrl1","vital","_id","delete","window","location","reload","pushState","length","map","item","idx"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Table from 'react-bootstrap/Table';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport Alert from 'react-bootstrap/Alert';\n\nfunction DetailPatientInfo(props) {\n    const [data, setData] = useState([]);\n    const [screen, setScreen] = useState('auth');\n    const [patientid, setId] = useState();\n    \n    const [showLoading, setShowLoading] = useState(false);\n    const apiUrl = \"http://localhost:3000/detailPatientInfo/\" + props.match.params.id;\n\n    const [show, setShow] = useState(false);\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n    const [tip, setTip] = useState([]);\n    const [message, setMessage] = useState('');\n    const apiUrlForSendingTip = \"http://localhost:3000/sendTip\";\n    const [currentUserID, setCurrentUserID] = useState('');\n\n    useEffect(() => {\n        readCookie();\n        setShowLoading(false);\n        const fetchData = async () => {\n            const result = await axios(apiUrl);\n            console.log('results from vitals' + result.data);\n\n            if(result.data == null) {\n                console.log(\"result.data is null!!\");\n            }\n            setId(props.match.params.id);\n            setData(result.data);\n        };\n        fetchData();\n    }, []);\n\n\n    //check if the user already logged-in\n    const readCookie = async () => {\n        try {\n            console.log('--- in readCookie function ---');\n\n            //\n            const res = await axios.get('/read_cookie');\n            // \n            if (res.data.screen !== undefined) {\n                setScreen(res.data.screen);\n                console.log(res.data.screen)\n\n                console.log(\"current user id: \", res.data.id);\n                setCurrentUserID(res.data.id);\n            }\n        } catch (e) {\n            setScreen('auth');\n            console.log(e);\n        }\n    };\n\n    const sendTip = () => {\n        const data = {\n            patientId: props.match.params.id,\n            nurseId: currentUserID,\n            tip: tip.tip\n        };\n\n        console.log(\"data >>>>\", data);\n\n        axios.post(apiUrlForSendingTip, data).then((result) => {\n            console.log(\"RESULT >>>> \", result);\n\n            if (result.data.message != null) {\n                setMessage(result.data.message);\n            }\n\n        }).catch((error) => {\n            console.log(\"ERROR!! \", error);\n        });\n\n        // Close modal\n        handleClose();\n        readCookie();\n    };\n\n    const onChange = (e) => {\n        e.persist();\n        setTip({ ...tip, [e.target.name]: e.target.value });\n    }\n\n    const newVital = (id) => {\n        console.log(\"check user id: \" +id);\n        props.history.push({\n          pathname: '/savePatientVital/' + id\n        });\n      }\n const deleteVital = (id,bodytemperature,heartrate,bloodpressure,respiratoryrate,visitedDate) => {\n        console.log(\"check vital id: \" + id);\n        console.log(\"check vital bodytemperature: \" + bodytemperature);\n        console.log(\"check vital iheartrated: \" + heartrate);\n        console.log(\"check vital bloodpressure: \" + bloodpressure);\n        console.log(\"check vital respiratoryrate: \" + respiratoryrate);\n        console.log(\"check vital visitedDate: \" + visitedDate);\n\n        setShowLoading(true);\n        const apiUrl1 = \"http://localhost:3000/deletevital/\"+id;\n        const vital = {\n            _id:id,\n            bodytemperature:bodytemperature,\n            heartrate:heartrate,\n            bloodpressure:bloodpressure,\n            respiratoryrate:respiratoryrate,\n            visitedDate:visitedDate\n        };\n        console.log(\">>1: \" + data.visitedDate)\n       \n        axios.delete(apiUrl1, vital)\n            .then((result) => {\n                console.log(\"test\");\n                setShowLoading(false);\n                window.location.reload(); \n                props.history.pushState('/detailPatientInfo/' + props.match.params.id)\n            }).catch((error) => setShowLoading(false));\n    };\n\n\n    return (\n        <div className=\"vitalSign\">\n\n            {message.length === 0\n                ?\n                <div></div>\n                :\n                <div><Alert variant=\"success\">{message}</Alert></div>\n            }\n\n            <h2 className=\"title\">Vital Signs</h2>\n\n            {data.length === 0\n                ?\n                    <div></div>\n                :           \n                    <div>\n                        <Table responsive>\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\">Body Temperature</th>\n                                    <th scope=\"col\">Heart Rate</th>\n                                    <th scope=\"col\">Blood Pressure</th>\n                                    <th scope=\"col\">Respiratory Rate</th>\n                                    <th scope=\"col\">Visted Date</th>\n                                    <th></th>\n                                    {/* <th scope=\"col\">Patient</th> */}\n\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {data.map((item, idx) => (\n                                    <tr>\n                                        <td>{item.bodytemperature}</td>\n                                        <td>{item.heartrate}</td>\n                                        <td>{item.bloodpressure}</td>\n                                        <td>{item.respiratoryrate}</td>\n                                        <td>{item.visitedDate}</td>\n                                        <td>\n                                        <Button className=\"ButtonSpace\" onClick={() => { deleteVital(item._id,item.bodytemperature,item.heartrate,\n                                            item.bloodpressure,item.respiratoryrate,item.visitedDate) }}>Delete</Button>\n                                        </td>\n                                        {/* <td>{item.patient}</td> */}\n\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </Table> \n                </div>  \n            }\n\n            <br/><br/>\n\n            <div className=\"Buttons\">\n                <Button className=\"ButtonSpace\" onClick={() => { newVital(patientid) }}>New Vital</Button>   \n                <Button className=\"ButtonSpace\" variant=\"success\" onClick={handleShow}>send daily motivational tips</Button>\n            </div>\n            <>\n                <Modal show={show} onHide={handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Send daily motivational tips to the patient !</Modal.Title>\n                    </Modal.Header>\n                    <Form>\n                        <Modal.Body>\n                            <Form.Group>\n                                {/* <Form.Label>Example textarea</Form.Label> */}\n                                <Form.Control as=\"textarea\" rows=\"5\" id=\"tip\" name=\"tip\" onChange={onChange} />\n                            </Form.Group>\n                        </Modal.Body>\n                        <Modal.Footer>\n                            <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n                            <Button variant=\"primary\" onClick={sendTip}>Send</Button>\n                        </Modal.Footer>\n                    </Form>\n                </Modal>\n            </>\n        </div>\n    );\n\n}\n\nexport default withRouter(DetailPatientInfo);\n"]},"metadata":{},"sourceType":"module"}