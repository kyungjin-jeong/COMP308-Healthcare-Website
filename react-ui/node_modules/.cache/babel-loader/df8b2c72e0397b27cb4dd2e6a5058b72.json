{"ast":null,"code":"var _jsxFileName = \"/Users/kyungjin/COMP308-Healthcare-Website/react-ui/src/components/patient/ShowEmergencyAlert.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Button from 'react-bootstrap/Button';\nimport { withRouter } from 'react-router-dom';\nimport Home from '../Home';\n\nfunction ShowEmergencyAlert(props) {\n  const [data, setData] = useState({});\n  const [showLoading, setShowLoading] = useState(true);\n  const apiUrl = \"http://localhost:3000/emergencies/\" + props.match.params.id;\n  useEffect(() => {\n    setShowLoading(false);\n\n    const fetchData = async () => {\n      const result = await axios(apiUrl);\n      setData(result.data);\n      setShowLoading(false);\n    };\n\n    fetchData();\n  }, []);\n\n  const cancelAlert = (emergencyId, emergency) => {\n    const updateUrl = apiUrl;\n    const data = {\n      emergencyCode: emergency.emergencyCode,\n      emergencySubject: emergency.emergencySubject,\n      description: emergency.description,\n      contactName: emergency.contactName,\n      contactNumber: emergency.contactNumber,\n      creationTime: emergency.creationTime,\n      status: \"Canceld\"\n    };\n    axios.put(updateUrl, data).then(result => {\n      window.location.reload(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, showLoading && /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, \"Loading...\")), /*#__PURE__*/React.createElement(Jumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 500,\n      height: 400,\n      backgroundColor: \"#fff\",\n      borderRadius: 40,\n      marginLeft: 480,\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, data.emergencyCode, \" Alert\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"Subject: \", data.emergencySubject), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Description: \", data.description), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Contact Name: \", data.contactName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"Contact Name: \", data.contactName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"Contact Number: \", data.creationTime), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Status: \", data.status), data.status === \"Active\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      color: \"green\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Waiting for response ...\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    variant: \"primary\",\n    onClick: () => {\n      cancelAlert(data._id, data);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, \"Cancel Alert\"), \"\\xA0\")) : /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      color: \"grey\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 18\n    }\n  }, \"This emergency alert is no longer available, either resolved or closed\"))));\n}\n\nexport default withRouter(ShowEmergencyAlert);","map":{"version":3,"sources":["/Users/kyungjin/COMP308-Healthcare-Website/react-ui/src/components/patient/ShowEmergencyAlert.js"],"names":["React","useState","useEffect","axios","Spinner","Jumbotron","Button","withRouter","Home","ShowEmergencyAlert","props","data","setData","showLoading","setShowLoading","apiUrl","match","params","id","fetchData","result","cancelAlert","emergencyId","emergency","updateUrl","emergencyCode","emergencySubject","description","contactName","contactNumber","creationTime","status","put","then","window","location","reload","width","height","backgroundColor","borderRadius","marginLeft","textAlign","color","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Button from 'react-bootstrap/Button';\nimport { withRouter } from 'react-router-dom';\nimport Home from '../Home';\n\nfunction ShowEmergencyAlert(props) {\n  const [data, setData] = useState({});\n  const [showLoading, setShowLoading] = useState(true);\n  const apiUrl = \"http://localhost:3000/emergencies/\" + props.match.params.id;\n\n  useEffect(() => {\n    setShowLoading(false);\n    const fetchData = async () => {\n      const result = await axios(apiUrl);\n      setData(result.data);\n      setShowLoading(false);\n    };\n\n    fetchData();\n  }, []);\n\n  const cancelAlert = (emergencyId, emergency) => {\n    const updateUrl = apiUrl;\n    const data = { emergencyCode: emergency.emergencyCode, \n        emergencySubject: emergency.emergencySubject, \n        description: emergency.description,\n        contactName: emergency.contactName,\n        contactNumber: emergency.contactNumber,\n        creationTime: emergency.creationTime,\n        status: \"Canceld\",\n     };\n     axios.put(updateUrl, data)\n     .then((result) => {\n        window.location.reload(false)\n     })\n  }\n\n  return (\n    <div>\n      {showLoading && <Spinner animation=\"border\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </Spinner> }    \n      <Jumbotron>\n          <div style={{width: 500, height: 400, backgroundColor: \"#fff\", borderRadius: 40, marginLeft: 480, textAlign: 'center'}}>\n        <h1 style={{color: \"red\"}}>{data.emergencyCode} Alert</h1>\n        <p>Subject: {data.emergencySubject}</p>\n        <p>Description: {data.description}</p>\n        <p>Contact Name: {data.contactName}</p>\n        <p>Contact Name: {data.contactName}</p>\n        <p>Contact Number: {data.creationTime}</p>\n        <p>Status: {data.status}</p>\n       \n        {data.status === \"Active\"\n\n        ? <div>\n        <h3 style={{color: \"green\"}}>Waiting for response ...</h3>\n        <p>\n          <Button type=\"button\" variant=\"primary\" onClick={() => { cancelAlert(data._id, data) }}>Cancel Alert</Button>&nbsp;\n        </p>\n        </div>\n\n        :        <h3 style={{color: \"grey\"}}>This emergency alert is no longer available, either resolved or closed</h3>\n        }\n </div>\n      </Jumbotron>\n    </div>\n  );\n}\n\nexport default withRouter(ShowEmergencyAlert);"]},"metadata":{},"sourceType":"module"}